let played=!1;const player=document.querySelector(".my-player"),playBtn=document.querySelector(".fa-play"),pauseBtn=document.querySelector(".fa-pause"),songTitle=document.querySelector(".music-title"),toggleSong=document.querySelectorAll(".next-btn-player"),eqz=document.getElementById("myCanvas"),loader=document.querySelector(".preloader-wrapper"),muteBtn=document.querySelectorAll(".volume-btn");let muteState=!0,idx=0;const to="/assets/music/",songs=[`${to}flipsyde-someday.mp3`,`${to}Markul-B.I.D.mp3`,`${to}suicideboys-Paris.mp3`,`${to}Noize-mc-sohrani-moyu-rech.mp3`,`${to}Morgenshtern - Уфф Деньги.mp3`,`${to}Duckwrth-Shaboozey-Start-a-Riot.mp3`];let songsCount=songs.length-1;var sound=new Howl({src:songs[idx],onend:function(){idx++,next(idx)},onplay:function(){eqz.style.display="inline-block",loader.style.display="none",updateCurrentSong(idx)}});function updateMusicTitle(index){let titleArr=songs[index].split(`${to}`).splice(1,1),titleArrIdx,title=titleArr[titleArr.length-1].split(".mp3");songTitle.innerHTML=title[0]}async function next(index){eqz.style.display="none",loader.style.display="inline-block",index>songsCount&&(idx=0,index=0),await sound.stop(),(sound=await new Howl({src:songs[index],onend:function(){idx++,next(idx)},onplay:function(){eqz.style.display="inline-block",loader.style.display="none",updateCurrentSong(idx)}})).mute(!muteState),sound.play(),updateMusicTitle(index)}muteBtn.forEach(btn=>{btn.addEventListener("click",(function(){sound.mute(muteState),muteState=!muteState,this.style.display="none","up"===this.dataset.type?document.querySelector(".fa-volume-mute").style.display="inline-block":document.querySelector(".fa-volume-up").style.display="inline-block"}))}),toggleSong.forEach(btn=>{btn.addEventListener("click",(function(){idx+=+this.dataset.next,idx>songsCount?idx=0:idx<0&&(idx=songsCount),next(idx)}))}),playBtn.addEventListener("click",(function(){eqz.style.display="none",loader.style.display="inline-block",played||(sound.play(),played=!0,this.style.display="none",player.style.display="inline-block",pauseBtn.style.display="inline-block"),updateMusicTitle(idx)})),pauseBtn.addEventListener("click",(function(){played&&(sound.pause(),played=!1,this.style.display="none",player.style.display="none",playBtn.style.display="inline-block")}));const playlistBlock=document.querySelector(".player-list-block"),closePlaylist=document.querySelector(".close-playlist"),openPlaylist=document.querySelector(".fa-list"),playlist=document.querySelector(".player-list");songs.forEach((song,idx)=>{let songSplit,songName=song.split(`${to}`).splice(1,1)[0].split(".mp3");playlist.innerHTML+=`<li class="song" data-songid="${idx}"><i class="fas fa-atom fa-spin" style="display: none"></i></i>${songName[0]}</li>`}),openPlaylist.addEventListener("click",(function(){playlistBlock.style.display="flex"})),closePlaylist.addEventListener("click",(function(){playlistBlock.style.display="none"})),document.addEventListener("mousedown",(function(e){null===e.target.closest(".player-list")&&(playlistBlock.style.display="none")}));const songsList=document.querySelectorAll(".song");function updateCurrentSong(index){songsList.forEach((song,songid)=>{index===songid?(song.style.color="#65DAFB",song.children[0].style.display="inline-block",song.style.pointerEvents="none",song.style.fontSize="22px"):index===songid&&"string"!=typeof index||(song.style.color="#ffff",song.children[0].style.display="none",song.style.pointerEvents="auto",song.style.fontSize="20px"),"number"==typeof index&&song.classList.remove("loading-song")})}songsList.forEach(song=>{song.addEventListener("click",(function(){idx=+this.dataset.songid,song.classList.add("loading-song"),next(idx),updateCurrentSong("update-list")}))});var maxBarHeight=50,minBarHeight=10,barPadding=2,barWidth=1,totalBars=700,barColor="#fff",canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),bar=[],fps=15;function InitBars(){for(var barHeight=0,x=0,y=0,i=0;i<totalBars;i++)barHeight=RandomizeHeight(),x=i+i+barPadding,y=ComputeYAxis(barHeight),bar.push({height:barHeight,buffHeight:barHeight,x:x,y:y}),ShrinkBar(i)}function ShrinkBar(index){if(bar[index].height>minBarHeight)ctx.fillStyle=barColor,ctx.clearRect(bar[index].x,bar[index].y,barWidth,bar[index].height),bar[index].height--,bar[index].y=ComputeYAxis(bar[index].height),ctx.fillRect(bar[index].x,bar[index].y,barWidth,bar[index].height),requestAnimationFrame((function(){ShrinkBar(index)}));else{for(var newHeight=RandomizeHeight();newHeight==minBarHeight;)newHeight=RandomizeHeight();bar[index].buffHeight=newHeight,GrowBar(index)}}function GrowBar(index){bar[index].height<bar[index].buffHeight?(ctx.fillStyle=barColor,ctx.clearRect(bar[index].x,bar[index].y,barWidth,bar[index].height),bar[index].height++,bar[index].y=ComputeYAxis(bar[index].height),ctx.fillRect(bar[index].x,bar[index].y,barWidth,bar[index].height),requestAnimationFrame((function(){GrowBar(index)}))):ShrinkBar(index)}function RandomizeHeight(){return Math.floor(Math.random()*maxBarHeight+minBarHeight)}function ComputeYAxis(height){return Math.round((maxBarHeight-height)/2)}InitBars();